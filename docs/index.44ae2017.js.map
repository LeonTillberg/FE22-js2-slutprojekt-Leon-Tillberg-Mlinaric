{"mappings":"AAAA,MAAMA,EAAY,CAACC,EAAcC,EAAeC,KAC5CC,SAASC,OAAS,GAAGJ,KAAQC,aAAiBC,EAAQG,eAAe,ECGnEC,EAAWH,SAASI,cAAc,mBAClCC,EAAWL,SAASI,cAAc,mBAClCE,EAAcN,SAASI,cAAc,cACzBJ,SAASI,cAAc,eAE/BG,iBAAiB,SAAUC,IACjCA,EAAMC,iBACNC,OAAOC,SAASC,OAAO,2BAG3BN,EAAYC,iBAAiB,SAAUC,IACnCA,EAAMC,iBACN,MAAMI,EAAgBV,EAASL,MAAMgB,OAC/BC,EAAgBV,EAASP,MAAMgB,OAErCE,EAASH,EAAeE,EAAA,IAI5B,MAAMC,EAAWC,MAAOJ,EAAuBE,KAC3C,MAAMG,EAAoB,yFAAYL,cAEhCM,QAAiBC,MAAMF,GAC7BG,QAAQC,IAAIH,GAEZ,MAAMI,QAAaJ,EAASK,OAG5B,GAFAH,QAAQC,IAAIC,GAERJ,EAASM,IAAMF,EAAKG,WAAaX,EAAe,CAChD,MAAMhB,EAAU,IAAI4B,KAAKA,KAAKC,MAAQ,MACtChC,EAAU,cAAeiB,EAAed,GACxCW,OAAOC,SAASC,OAAO,cAC3B,MACIiB,MAAM","sources":["src/modules/cookie.ts","src/start.ts"],"sourcesContent":["const setCookie = (name: string, value: string, expires: any): void => {\r\n    document.cookie = `${name}=${value};expires=${expires.toUTCString()}`;\r\n}\r\n\r\nconst getCookie = (name: string): string => {\r\n    const cookieString = decodeURIComponent(document.cookie);\r\n    const cookies = cookieString.split(';');\r\n\r\n    for (let i = 0; i < cookies.length; i++) {\r\n        const cookie = cookies[i].trim();\r\n\r\n        if (cookie.startsWith(name + '=')) {\r\n            return cookie.substring(name.length + 1);\r\n        }\r\n    }\r\n    return '';\r\n}\r\n\r\nexport { setCookie, getCookie }","import {setCookie} from './modules/cookie'\r\n\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst username = document.querySelector('.username-login') as HTMLInputElement;\r\nconst password = document.querySelector('.password-login') as HTMLInputElement;\r\nconst loginButton = document.querySelector('.login-btn') as HTMLButtonElement;\r\nconst createBtn = document.querySelector('.create-btn') as HTMLButtonElement;\r\n\r\ncreateBtn.addEventListener('click', (event) =>{\r\n    event.preventDefault();\r\n    window.location.assign('./createprofile.html');\r\n})\r\n\r\nloginButton.addEventListener('click', (event) => {\r\n    event.preventDefault();\r\n    const usernameValue = username.value.trim();\r\n    const passwordValue = password.value.trim();\r\n\r\n    tryLogIn(usernameValue, passwordValue);\r\n\r\n});\r\n\r\nconst tryLogIn = async (usernameValue: string, passwordValue: string): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles/${usernameValue}/info.json`;\r\n\r\n    const response = await fetch(url);\r\n    console.log(response);\r\n\r\n    const data = await response.json();\r\n    console.log(data);\r\n\r\n    if (response.ok && data.password === passwordValue) {\r\n        const expires = new Date(Date.now() + 3600 * 1000);\r\n        setCookie('loginCookie', usernameValue, expires);\r\n        window.location.assign('./main.html');\r\n    } else {\r\n        alert(\"Wrong username or password!\");\r\n    }\r\n}"],"names":["$b336381c105cd4be$export$110700823644f4a6","name","value","expires","document","cookie","toUTCString","$0822a03406299286$var$username","querySelector","$0822a03406299286$var$password","$0822a03406299286$var$loginButton","addEventListener","event","preventDefault","window","location","assign","usernameValue","trim","passwordValue","$0822a03406299286$var$tryLogIn","async","url","response","fetch","console","log","data","json","ok","password","Date","now","alert"],"version":3,"file":"index.44ae2017.js.map"}