{"mappings":"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","sources":["src/modules/cookie.ts","src/modules/status.ts","src/modules/userlist.ts","src/modules/displaylogin.ts","src/modules/delete.ts","src/main.ts"],"sourcesContent":["const setCookie = (name: string, value: string, expires: any): void => {\r\n    document.cookie = `${name}=${value};expires=${expires.toUTCString()}`;\r\n}\r\n\r\nconst getCookie = (name: string): string => {\r\n    const cookieString = decodeURIComponent(document.cookie);\r\n    const cookies = cookieString.split(';');\r\n\r\n    for (let i = 0; i < cookies.length; i++) {\r\n        const cookie = cookies[i].trim();\r\n\r\n        if (cookie.startsWith(name + '=')) {\r\n            return cookie.substring(name.length + 1);\r\n        }\r\n    }\r\n    return '';\r\n}\r\n\r\nexport { setCookie, getCookie }","import { getCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst username = getCookie('loginCookie');\r\n\r\nconst postBtn = document.querySelector(\".post-btn\") as HTMLButtonElement;\r\npostBtn.addEventListener('click', getPost);\r\n\r\nwindow.onload = function () {\r\n    displayAllPosts();\r\n}\r\n\r\nfunction getPost(event) {\r\n    event.preventDefault();\r\n\r\n    const inputStatus = document.querySelector(\".status-input\") as HTMLInputElement;\r\n    const status = inputStatus.value;\r\n\r\n    addPost(status)\r\n        .then(() => {\r\n            inputStatus.value = \"\";\r\n            location.reload();\r\n        });\r\n}\r\n\r\nconst addPost = async (status: string): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles/${username}/Statuses.json`;\r\n\r\n    const newStatus = {\r\n        post: status,\r\n        timestamp: Date.now()\r\n    };\r\n\r\n    const init = {\r\n        method: \"POST\",\r\n        body: JSON.stringify(newStatus),\r\n        headers: {\r\n            'Content-type': 'application/json; charset=UTF-8'\r\n        }\r\n    };\r\n\r\n    const response = await fetch(url, init);\r\n    const data = await response.json();\r\n\r\n    const infoUrl = firebaseUrl + `Profiles/${username}/info.json`;\r\n    const infoResponse = await fetch(infoUrl);\r\n    const infoData = await infoResponse.json();\r\n\r\n    viewPost({ post: status, name: infoData.name, picture: infoData.picture });\r\n}\r\n\r\nconst viewPost = async (newStatus: any): Promise<any> => {\r\n    const divs = document.createElement('div');\r\n    divs.classList.add('status');\r\n    document.querySelector('.old-status')?.append(divs);\r\n\r\n    const infoUrl = firebaseUrl + `Profiles/${username}/info.json`;\r\n    const infoResponse = await fetch(infoUrl);\r\n    const infoData = await infoResponse.json();\r\n\r\n    const imgElement = document.createElement('img');\r\n    const imgUrl = new URL(infoData.picture, import.meta.url);\r\n    imgElement.src = imgUrl.href;\r\n    imgElement.classList.add('status-pic');\r\n    divs.append(imgElement);\r\n\r\n    const name = document.createElement('h4');\r\n    name.innerText = infoData.name + \":\";\r\n    name.classList.add('status-name');\r\n    divs.append(name);\r\n\r\n    const post = document.createElement('p');\r\n    post.innerText = newStatus.post;\r\n    post.classList.add('post');\r\n    divs.append(post);\r\n}\r\n\r\nconst displayAllPosts = async (): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles/${username}/Statuses.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    if (data) {\r\n        const postArray = Object.values(data);\r\n        postArray.sort((a: any, b: any) => b.timestamp - a.timestamp);\r\n\r\n        const oldStatusContainer = document.querySelector('.old-status') as HTMLElement;\r\n        oldStatusContainer.innerHTML = '';\r\n\r\n        for (let i = 0; i < postArray.length; i++) {\r\n            const post = postArray[i];\r\n            viewPost(post);\r\n        }\r\n    }\r\n}\r\n\r\nexport { addPost, viewPost, displayAllPosts };","import { setCookie, getCookie } from \"./cookie\";\r\n\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst loginUsername: string = getCookie('loginCookie');\r\n\r\nconst getUsers = async (): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    const userList = document.querySelector('.user-list') as HTMLElement;\r\n    userList.innerHTML = \"\";\r\n\r\n    for (const username in data) {\r\n        // if (username === loginUsername) {\r\n        //     continue;\r\n        // }\r\n        const divs = document.createElement('div');\r\n        divs.classList.add('user');\r\n        userList.append(divs);\r\n\r\n        const profileUrl = firebaseUrl + `Profiles/${username}/info.json`;\r\n        const profileResponse = await fetch(profileUrl);\r\n        const profileData = await profileResponse.json();\r\n\r\n        const imgElement = document.createElement('img');\r\n        const imgUrl = new URL(profileData.picture, import.meta.url);\r\n        imgElement.src = imgUrl.href;\r\n        imgElement.classList.add('userlist-picture');\r\n        divs.append(imgElement);\r\n\r\n        const nameElement = document.createElement('p');\r\n        nameElement.innerText = profileData.name;\r\n        nameElement.addEventListener('click', () => {\r\n            const expires = new Date(Date.now() + 3600 * 1000);\r\n            setCookie('profileCookie', username, expires);\r\n            window.location.assign('./profile.html');\r\n        });\r\n        nameElement.classList.add('userlist-name');\r\n        divs.append(nameElement);\r\n    }\r\n}\r\n\r\nexport { getUsers };\r\n","import { getCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst username = getCookie('loginCookie');\r\nconsole.log('loginCookie', username);\r\n\r\nconst profileImg = document.querySelector('.profile-picture') as HTMLImageElement;\r\nconst profileName = document.querySelector('.profile-name') as HTMLElement;\r\n\r\nconst showAccount = async (): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles/${username}/info.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    profileName.textContent = data.name;\r\n    profileName.addEventListener('click', () => {\r\n        location.assign('./main.html');\r\n    });\r\n\r\n    const imgElement = document.createElement('img');\r\n    const imgUrl = new URL(data.picture, import.meta.url);\r\n    imgElement.src = imgUrl.href;\r\n    imgElement.classList.add('account-img');\r\n    imgElement.addEventListener('click', () => {\r\n        location.assign('./main.html');\r\n    });\r\n    profileImg.append(imgElement);\r\n}\r\n\r\nexport { showAccount }","import { getCookie, setCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst loginUsername:string = getCookie('loginCookie');\r\n\r\nasync function deleteProfile(username: string): Promise<any> {\r\n    const profileUrl = firebaseUrl + `Profiles/${username}.json`;\r\n    const profileResponse = await fetch(profileUrl, { method: 'DELETE' });\r\n\r\n    return;\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const deleteBtn = document.querySelector('.delete-account') as HTMLButtonElement;\r\n    \r\n    deleteBtn.addEventListener('click', async () => {\r\n        await deleteProfile(loginUsername);\r\n        // setCookie('loginCookie', '', new Date(0));\r\n        window.location.assign('./index.html');\r\n    });\r\n});\r\n\r\nexport {deleteProfile};","import { displayAllPosts } from './modules/status';\r\nimport { getUsers } from './modules/userlist';\r\nimport { showAccount } from './modules/displaylogin';\r\nimport { deleteProfile } from './modules/delete';\r\nimport { setCookie, getCookie } from './modules/cookie';\r\n\r\nconst loginUsername:string = getCookie('loginCookie');\r\nconst deleteBtn = document.querySelector('.delete-account') as HTMLButtonElement;\r\n\r\ndeleteBtn.addEventListener('click', async () => {\r\n    await deleteProfile(loginUsername);\r\n    setCookie('loginCookie', '', new Date(0));\r\n    window.location.assign('./login.html');\r\n});\r\n\r\nwindow.addEventListener('load', () => {\r\n    showAccount();\r\n    displayAllPosts();\r\n    getUsers();\r\n});\r\n\r\n\r\n/*\r\nAtt göra:\r\n- Extra content / funktioner = logout knapp. reklam fönster. Kommentera på statusar?. Login animation.\r\n*/"],"names":["$b336381c105cd4be$export$110700823644f4a6","name","value","expires","document","cookie","toUTCString","$b336381c105cd4be$export$4be65e66cfa2648a","cookies","decodeURIComponent","split","i","length","trim","startsWith","substring","$7c9611281f552767$var$firebaseUrl","$7c9611281f552767$var$username","querySelector","addEventListener","event","preventDefault","inputStatus","status","$7c9611281f552767$export$27e5ecd6f2b8caed","then","location","reload","window","onload","$7c9611281f552767$export$51b4bd96386561ba","async","url","newStatus","post","timestamp","Date","now","init","method","body","JSON","stringify","headers","response","fetch","infoUrl","json","infoResponse","infoData","$7c9611281f552767$export$ef7cb03f17c281b7","picture","divs","createElement","classList","add","append","imgElement","imgUrl","URL","src","href","innerText","data","postArray","Object","values","sort","a","b","innerHTML","$205633f2418d7361$var$firebaseUrl","$205633f2418d7361$export$925a4945a6cd0f3e","userList","username","profileUrl","profileResponse","profileData","nameElement","assign","$2b08abb1aadd7db4$var$username","console","log","$2b08abb1aadd7db4$var$profileImg","$2b08abb1aadd7db4$var$profileName","$2b08abb1aadd7db4$export$ccac0216bd5fbf68","textContent","$aa60c279a1cccca5$var$loginUsername","$aa60c279a1cccca5$export$29d101fdcde3d3d3","$ad2bcec7a0192558$var$loginUsername"],"version":3,"file":"main.360e1b4c.js.map"}