const e=(e,t,n)=>{document.cookie=`${e}=${t};expires=${n.toUTCString()}`},t=e=>{const t=decodeURIComponent(document.cookie).split(";");for(let n=0;n<t.length;n++){const s=t[n].trim();if(s.startsWith(e+"="))return s.substring(e.length+1)}return""},n="https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/",s=t("loginCookie");document.querySelector(".post-btn").addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(".status-input"),n=t.value;o(n).then((()=>{t.value="",location.reload()}))})),window.onload=function(){i()};const o=async e=>{const t=n+`Profiles/${s}/Statuses.json`,o={post:e,timestamp:Date.now()},i={method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}},c=await fetch(t,i),r=(await c.json(),n+`Profiles/${s}/info.json`),d=await fetch(r),l=await d.json();a({post:e,name:l.name,picture:l.picture})},a=async e=>{const t=document.createElement("div");t.classList.add("status"),document.querySelector(".old-status")?.append(t);const o=n+`Profiles/${s}/info.json`,a=await fetch(o),i=await a.json(),c=document.createElement("img"),r=new URL(i.picture,"file:///src/modules/status.ts");c.src=r.href,c.classList.add("status-pic"),t.append(c);const d=document.createElement("h4");d.innerText=i.name+":",d.classList.add("status-name"),t.append(d);const l=document.createElement("p");l.innerText=e.post,l.classList.add("post"),t.append(l)},i=async()=>{const e=n+`Profiles/${s}/Statuses.json`,t=await fetch(e),o=await t.json();if(o){const e=Object.values(o);e.sort(((e,t)=>t.timestamp-e.timestamp));document.querySelector(".old-status").innerHTML="";for(let t=0;t<e.length;t++){const n=e[t];a(n)}}},c="https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/",r=(t("loginCookie"),async()=>{const t=c+"Profiles.json",n=await fetch(t),s=await n.json(),o=document.querySelector(".user-list");o.innerHTML="";for(const t in s){const n=document.createElement("div");n.classList.add("user"),o.append(n);const s=c+`Profiles/${t}/info.json`,a=await fetch(s),i=await a.json(),r=document.createElement("img"),d=new URL(i.picture,"file:///src/modules/userlist.ts");r.src=d.href,r.classList.add("userlist-picture"),n.append(r);const l=document.createElement("p");l.innerText=i.name,l.addEventListener("click",(()=>{const n=new Date(Date.now()+36e5);e("profileCookie",t,n),window.location.assign("./profile.html")})),l.classList.add("userlist-name"),n.append(l)}}),d=t("loginCookie");console.log("loginCookie",d);const l=document.querySelector(".profile-picture"),u=document.querySelector(".profile-name"),p=async()=>{const e=`https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/Profiles/${d}/info.json`,t=await fetch(e),n=await t.json();u.textContent=n.name,u.addEventListener("click",(()=>{location.assign("./main.html")}));const s=document.createElement("img"),o=new URL(n.picture,"file:///src/modules/displaylogin.ts");s.src=o.href,s.classList.add("account-img"),s.addEventListener("click",(()=>{location.assign("./main.html")})),l.append(s)},m=t("loginCookie");async function f(e){const t=`https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/Profiles/${e}.json`;await fetch(t,{method:"DELETE"})}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".delete-account").addEventListener("click",(async()=>{await f(m),window.location.assign("./index.html")}))}));const w=t("loginCookie");document.querySelector(".delete-account").addEventListener("click",(async()=>{await f(w),e("loginCookie","",new Date(0)),window.location.assign("./login.html")})),window.addEventListener("load",(()=>{p(),i(),r()}));
//# sourceMappingURL=main.360e1b4c.js.map
