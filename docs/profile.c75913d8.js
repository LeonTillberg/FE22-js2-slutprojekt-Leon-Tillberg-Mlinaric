const e=(e,t,s)=>{document.cookie=`${e}=${t};expires=${s.toUTCString()}`},t=e=>{const t=decodeURIComponent(document.cookie).split(";");for(let s=0;s<t.length;s++){const n=t[s].trim();if(n.startsWith(e+"="))return n.substring(e.length+1)}return""},s="https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/",n=t("profileCookie");window.onload=function(){a()};const o=async e=>{const t=document.createElement("div");t.classList.add("status"),document.querySelector(".old-status")?.append(t);const o=s+`Profiles/${n}/info.json`,a=await fetch(o),i=await a.json(),c=document.createElement("img"),r=new URL(i.picture,"file:///src/modules/usersStatus.ts");c.src=r.href,c.classList.add("status-pic"),t.append(c);const d=document.createElement("h4");d.innerText=i.name+":",d.classList.add("status-name"),t.append(d);const l=document.createElement("p");l.classList.add("post"),l.innerText=e.post,l.classList.add("post"),t.append(l)},a=async()=>{const e=s+`Profiles/${n}/Statuses.json`,t=await fetch(e),a=await t.json();if(a){const e=Object.values(a);e.sort(((e,t)=>t.timestamp-e.timestamp));document.querySelector(".old-status").innerHTML="";for(let t=0;t<e.length;t++){const s=e[t];o(s)}}},i="https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/",c=(t("loginCookie"),async()=>{const t=i+"Profiles.json",s=await fetch(t),n=await s.json(),o=document.querySelector(".user-list");o.innerHTML="";for(const t in n){const s=document.createElement("div");s.classList.add("user"),o.append(s);const n=i+`Profiles/${t}/info.json`,a=await fetch(n),c=await a.json(),r=document.createElement("img"),d=new URL(c.picture,"file:///src/modules/userlist.ts");r.src=d.href,r.classList.add("userlist-picture"),s.append(r);const l=document.createElement("p");l.innerText=c.name,l.addEventListener("click",(()=>{const s=new Date(Date.now()+36e5);e("profileCookie",t,s),window.location.assign("./profile.html")})),l.classList.add("userlist-name"),s.append(l)}}),r=t("profileCookie");console.log("userCookie",r);const d=async()=>{const e=`https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/Profiles/${r}/info.json`,t=await fetch(e),s=await t.json();console.log(s);const n=document.querySelector(".showuser-container"),o=document.createElement("img"),a=new URL(s.picture,"file:///src/modules/showuser.ts");o.src=a.href,o.classList.add("showuser-pic"),n.append(o);const i=document.createElement("h3");i.innerText=s.name,i.classList.add("showuser-name"),n.append(i)},l=t("loginCookie");console.log("loginCookie",l);const u=document.querySelector(".profile-picture"),p=document.querySelector(".profile-name"),m=async()=>{const e=`https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/Profiles/${l}/info.json`,t=await fetch(e),s=await t.json();p.textContent=s.name,p.addEventListener("click",(()=>{location.assign("./main.html")}));const n=document.createElement("img"),o=new URL(s.picture,"file:///src/modules/displaylogin.ts");n.src=o.href,n.classList.add("account-img"),n.addEventListener("click",(()=>{location.assign("./main.html")})),u.append(n)},f=t("loginCookie");async function w(e){const t=`https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/Profiles/${e}.json`;await fetch(t,{method:"DELETE"})}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".delete-account").addEventListener("click",(async()=>{await w(f),window.location.assign("./index.html")}))}));const h=t("loginCookie");document.querySelector(".delete-account").addEventListener("click",(async()=>{await w(h),e("loginCookie","",new Date(0)),window.location.assign("./login.html")})),window.addEventListener("load",(()=>{m(),c(),a(),d()}));
//# sourceMappingURL=profile.c75913d8.js.map
