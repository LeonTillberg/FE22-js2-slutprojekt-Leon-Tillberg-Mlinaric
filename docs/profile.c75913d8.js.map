{"mappings":"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","sources":["src/modules/cookie.ts","src/modules/usersStatus.ts","src/modules/userlist.ts","src/modules/showuser.ts","src/modules/displaylogin.ts","src/modules/delete.ts","src/profile.ts"],"sourcesContent":["const setCookie = (name: string, value: string, expires: any): void => {\r\n    document.cookie = `${name}=${value};expires=${expires.toUTCString()}`;\r\n}\r\n\r\nconst getCookie = (name: string): string => {\r\n    const cookieString = decodeURIComponent(document.cookie);\r\n    const cookies = cookieString.split(';');\r\n\r\n    for (let i = 0; i < cookies.length; i++) {\r\n        const cookie = cookies[i].trim();\r\n\r\n        if (cookie.startsWith(name + '=')) {\r\n            return cookie.substring(name.length + 1);\r\n        }\r\n    }\r\n    return '';\r\n}\r\n\r\nexport { setCookie, getCookie }","import { getCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst username = getCookie(\"profileCookie\");\r\n\r\nwindow.onload = function () {\r\n    displayAllPosts();\r\n}\r\n\r\nconst viewPost = async (newStatus: any) => {\r\n    const divs = document.createElement('div');\r\n    divs.classList.add('status');\r\n    document.querySelector('.old-status')?.append(divs);\r\n\r\n    const infoUrl = firebaseUrl + `Profiles/${username}/info.json`;\r\n    const infoResponse = await fetch(infoUrl);\r\n    const infoData = await infoResponse.json();\r\n\r\n    const imgElement = document.createElement('img');\r\n    const imgUrl = new URL(infoData.picture, import.meta.url);\r\n    imgElement.src = imgUrl.href;\r\n    imgElement.classList.add('status-pic');\r\n    divs.append(imgElement);\r\n\r\n    const name = document.createElement('h4');\r\n    name.innerText = infoData.name + \":\";\r\n    name.classList.add('status-name');\r\n    divs.append(name);\r\n\r\n    const status = document.createElement('p');\r\n    status.classList.add('post');\r\n    status.innerText = newStatus.post;\r\n    status.classList.add('post');\r\n    divs.append(status);\r\n};\r\n\r\nconst displayAllPosts = async () => {\r\n    const url = firebaseUrl + `Profiles/${username}/Statuses.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    if (data) {\r\n        const postArray = Object.values(data);\r\n\r\n        postArray.sort((a: any, b: any) => b.timestamp - a.timestamp);\r\n\r\n        const oldStatusContainer = document.querySelector('.old-status') as HTMLElement;\r\n        oldStatusContainer.innerHTML = '';\r\n\r\n        for (let i = 0; i < postArray.length; i++) {\r\n            const post = postArray[i];\r\n            viewPost(post);\r\n        }\r\n    }\r\n};\r\n\r\nexport { displayAllPosts };\r\n\r\n","import { setCookie, getCookie } from \"./cookie\";\r\n\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst loginUsername: string = getCookie('loginCookie');\r\n\r\nconst getUsers = async (): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    const userList = document.querySelector('.user-list') as HTMLElement;\r\n    userList.innerHTML = \"\";\r\n\r\n    for (const username in data) {\r\n        // if (username === loginUsername) {\r\n        //     continue;\r\n        // }\r\n        const divs = document.createElement('div');\r\n        divs.classList.add('user');\r\n        userList.append(divs);\r\n\r\n        const profileUrl = firebaseUrl + `Profiles/${username}/info.json`;\r\n        const profileResponse = await fetch(profileUrl);\r\n        const profileData = await profileResponse.json();\r\n\r\n        const imgElement = document.createElement('img');\r\n        const imgUrl = new URL(profileData.picture, import.meta.url);\r\n        imgElement.src = imgUrl.href;\r\n        imgElement.classList.add('userlist-picture');\r\n        divs.append(imgElement);\r\n\r\n        const nameElement = document.createElement('p');\r\n        nameElement.innerText = profileData.name;\r\n        nameElement.addEventListener('click', () => {\r\n            const expires = new Date(Date.now() + 3600 * 1000);\r\n            setCookie('profileCookie', username, expires);\r\n            window.location.assign('./profile.html');\r\n        });\r\n        nameElement.classList.add('userlist-name');\r\n        divs.append(nameElement);\r\n    }\r\n}\r\n\r\nexport { getUsers };\r\n","import { getCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst username = getCookie('profileCookie');\r\nconsole.log('userCookie', username)\r\n\r\nconst showProfile = async (): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles/${username}/info.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    console.log(data);\r\n\r\n    const container = document.querySelector('.showuser-container') as HTMLElement;\r\n\r\n    const imgElement = document.createElement('img');\r\n    const imgUrl = new URL(data.picture, import.meta.url);\r\n    imgElement.src = imgUrl.href;\r\n    imgElement.classList.add('showuser-pic');\r\n    container.append(imgElement);\r\n\r\n    const nameElement = document.createElement('h3');\r\n    nameElement.innerText = data.name;\r\n    nameElement.classList.add('showuser-name');\r\n    container.append(nameElement);\r\n}\r\n\r\nexport { showProfile };\r\n","import { getCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst username = getCookie('loginCookie');\r\nconsole.log('loginCookie', username);\r\n\r\nconst profileImg = document.querySelector('.profile-picture') as HTMLImageElement;\r\nconst profileName = document.querySelector('.profile-name') as HTMLElement;\r\n\r\nconst showAccount = async (): Promise<any> => {\r\n    const url = firebaseUrl + `Profiles/${username}/info.json`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    profileName.textContent = data.name;\r\n    profileName.addEventListener('click', () => {\r\n        location.assign('./main.html');\r\n    });\r\n\r\n    const imgElement = document.createElement('img');\r\n    const imgUrl = new URL(data.picture, import.meta.url);\r\n    imgElement.src = imgUrl.href;\r\n    imgElement.classList.add('account-img');\r\n    imgElement.addEventListener('click', () => {\r\n        location.assign('./main.html');\r\n    });\r\n    profileImg.append(imgElement);\r\n}\r\n\r\nexport { showAccount }","import { getCookie, setCookie } from \"./cookie\";\r\nconst firebaseUrl: string = \"https://js2-slutprojekt-fdba7-default-rtdb.europe-west1.firebasedatabase.app/\";\r\n\r\nconst loginUsername:string = getCookie('loginCookie');\r\n\r\nasync function deleteProfile(username: string): Promise<any> {\r\n    const profileUrl = firebaseUrl + `Profiles/${username}.json`;\r\n    const profileResponse = await fetch(profileUrl, { method: 'DELETE' });\r\n\r\n    return;\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const deleteBtn = document.querySelector('.delete-account') as HTMLButtonElement;\r\n    \r\n    deleteBtn.addEventListener('click', async () => {\r\n        await deleteProfile(loginUsername);\r\n        // setCookie('loginCookie', '', new Date(0));\r\n        window.location.assign('./index.html');\r\n    });\r\n});\r\n\r\nexport {deleteProfile};","import { displayAllPosts } from './modules/usersStatus';\r\nimport { getUsers } from './modules/userlist';\r\nimport { showProfile } from './modules/showuser';\r\nimport { showAccount } from './modules/displaylogin';\r\nimport { deleteProfile } from './modules/delete';\r\nimport { setCookie, getCookie } from './modules/cookie';\r\n\r\nconst loginUsername:string = getCookie('loginCookie');\r\nconst deleteBtn = document.querySelector('.delete-account') as HTMLButtonElement;\r\n\r\ndeleteBtn.addEventListener('click', async () => {\r\n    await deleteProfile(loginUsername);\r\n    setCookie('loginCookie', '', new Date(0));\r\n    window.location.assign('./login.html');\r\n});\r\n\r\nwindow.addEventListener('load', () => {\r\n    showAccount();\r\n    getUsers();\r\n    displayAllPosts();\r\n    showProfile();\r\n});\r\n\r\n"],"names":["$b336381c105cd4be$export$110700823644f4a6","name","value","expires","document","cookie","toUTCString","$b336381c105cd4be$export$4be65e66cfa2648a","cookies","decodeURIComponent","split","i","length","trim","startsWith","substring","$cf203f48c225a9f8$var$firebaseUrl","$cf203f48c225a9f8$var$username","window","onload","$cf203f48c225a9f8$export$51b4bd96386561ba","$cf203f48c225a9f8$var$viewPost","async","newStatus","divs","createElement","classList","add","querySelector","append","infoUrl","infoResponse","fetch","infoData","json","imgElement","imgUrl","URL","picture","src","href","innerText","status","post","url","response","data","postArray","Object","values","sort","a","b","timestamp","innerHTML","$205633f2418d7361$var$firebaseUrl","$205633f2418d7361$export$925a4945a6cd0f3e","userList","username","profileUrl","profileResponse","profileData","nameElement","addEventListener","Date","now","location","assign","$55b89b3d267e5304$var$username","console","log","$55b89b3d267e5304$export$98222214fa4367ec","container","$2b08abb1aadd7db4$var$username","$2b08abb1aadd7db4$var$profileImg","$2b08abb1aadd7db4$var$profileName","$2b08abb1aadd7db4$export$ccac0216bd5fbf68","textContent","$aa60c279a1cccca5$var$loginUsername","$aa60c279a1cccca5$export$29d101fdcde3d3d3","method","$82d016955754da9c$var$loginUsername"],"version":3,"file":"profile.c75913d8.js.map"}